<div class="page-title pb-3">
  <h3 class="d-inline-block" *ngIf="isNewEntry">Add New User</h3>
  <h3 class="d-inline-block" *ngIf="!isNewEntry">Modify User</h3>
  <div class="btn-group-v2 float-right">
    <div class="radio-container d-inline-block mr-4" *ngIf="!isNewEntry && isModify">
      <input type="checkbox" name="group1" id="radio-1" [checked]="isValidatePass"
        (change)="isValidatePass = !isValidatePass">
      <label for="radio-1"><span class="radio">Change Password</span></label>
    </div>
    <button class="btn btn-light mr-4" (click)="continueInfoModification()"
      *ngIf="!isNewEntry && !isModify">Modify</button>
    <button class="btn btn-success mr-4" *ngIf="isModify" (click)="saveModificationForm()" [attr.disabled]="isFormSubmitted ? true : null">Save</button>
    <button class="btn btn-secondary" [routerLink]="['/user-management']" [attr.disabled]="isFormSubmitted ? true : null">Cancel</button>
  </div>
</div>
<!-- Form Section Start -->
<div class="form-section">
  <form [formGroup]="userModifyForm">
    <div class="row">
      <div class="col-md-8 col-xs-12">

        <h5 class="form-section-title mb-3">User Information</h5>

        <div class="row" *ngIf="isNewEntry">
          <div class="col-md-6 form-group">
            <label>User Name</label>
            <input type="text" placeholder="User Name" class="form-control" formControlName="username"
              (focusout)="trimAndValidateUserForm('username')" [readOnly]="isInputReadOnly || isPreview"
              [attr.disabled]="!isNewEntry ? true : null" />
            <small class="form-text text-muted err-msg">{{validationMessages?.username}}</small>
          </div>
          <div class="col-md-6 form-group">
            <label>User Code</label>
            <div class="input-group">
              <input type="text" placeholder="Generate User Code" class="form-control active-readOnly"
                formControlName="userCode" readonly />
              <div class="input-group-append">
                <span class="input-group-text cursor-pointer" (click)="generateUserCode();">Generate Code</span>
              </div>
            </div>
            <small class="form-text text-muted err-msg">{{validationMessages?.userCode}}</small>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6 form-group">
            <label>First Name</label>
            <input type="text" placeholder="First Name" class="form-control" formControlName="firstName"
              (focusout)="trimAndValidateUserForm('firstName')" [readOnly]="isInputReadOnly || isPreview">
            <small class="form-text text-muted err-msg">{{validationMessages?.firstName}}</small>
          </div>
          <div class="col-md-6 form-group">
            <label>Last Name</label>
            <input type="text" placeholder="Last Name" class="form-control" formControlName="lastName"
              (focusout)="trimAndValidateUserForm('lastName')" [readOnly]="isInputReadOnly || isPreview">
            <small class="form-text text-muted err-msg">{{validationMessages?.lastName}}</small>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6 form-group">
            <label>Email Address</label>
            <input type="text" placeholder="Email Address" class="form-control" formControlName="email"
              (focusout)="trimAndValidateUserForm('email')" [readOnly]="isInputReadOnly || isPreview" />
            <small class="form-text text-muted err-msg">{{validationMessages?.email}}</small>
          </div>
          <div class="col-md-6 form-group">
            <label>Phone Number</label>
            <input type="text" placeholder="Phone Number" class="form-control" formControlName="phoneNumber"
              (focusout)="trimAndValidateUserForm('phoneNumber')" [readOnly]="isInputReadOnly || isPreview">
            <small class="form-text text-muted err-msg">{{validationMessages?.phoneNumber}}</small>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6 form-group">
            <label>Category</label>
            <select class="form-control" formControlName="userCategory"
              (focusout)="trimAndValidateUserForm('userCategory')"
              [attr.disabled]="(isInputReadOnly || isPreview) ? true : null">
              <option value="">--- Select Category ---</option>
              <option *ngFor="let _cat of userCategoryList" [value]="_cat">{{_cat}}</option>
            </select>
            <small class="form-text text-muted err-msg">{{validationMessages?.userCategory}}</small>
          </div>
          <div class="col-md-6 form-group">
            <label>Address</label>
            <textarea placeholder="Address" class="form-control" formControlName="address"
              (focusout)="trimAndValidateUserForm('address')" col="2"
              [readOnly]="isInputReadOnly || isPreview"></textarea>
            <small class="form-text text-muted err-msg">{{validationMessages?.address}}</small>
          </div>
        </div>
        <ng-container *ngIf="isNewEntry || (!isNewEntry && isValidatePass)">
          <h5 class="form-section-title mb-3">Security Information</h5>

          <div class="row">
            <div class="col-md-6 form-group">
              <label>Password</label>
              <input type="password" placeholder="Password" class="form-control" formControlName="password"
                (focusout)="trimAndValidateUserForm('password')" [readOnly]="isInputReadOnly || isPreview">
              <small class="form-text text-muted err-msg">{{validationMessages?.password}}</small>
            </div>
            <div class="col-md-6 form-group">
              <label>Confirm Password</label>
              <input type="password" placeholder="Confirm Password" class="form-control" formControlName="cnfPass"
                (focusout)="trimAndValidateUserForm('cnfPass')" [readOnly]="isInputReadOnly || isPreview" />
              <small class="form-text text-muted err-msg">{{validationMessages?.cnfPass}}</small>
            </div>
          </div>
        </ng-container>
      </div>
    </div>
  </form>
</div>
<!-- Form Button Section -->
<div class="footer-btn-group">
  <button class="btn btn-light mr-4" (click)="continueInfoModification()"
    *ngIf="!isNewEntry && !isModify">Modify</button>
  <button class="btn btn-success mr-4" *ngIf="isModify" (click)="saveModificationForm()" [attr.disabled]="isFormSubmitted ? true : null">Save</button>
  <button class="btn btn-secondary" [routerLink]="['/user-management']" [attr.disabled]="isFormSubmitted ? true : null">Cancel</button>
</div>